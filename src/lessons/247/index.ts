import p5 from "p5";
new p5((p) => {
  // Ñ€Ð°Ð·Ð¼ÐµÑ€Ñ‹ ÑÐºÑ€Ð°Ð½Ð° (Ñ…Ð¾Ð»ÑÑ‚Ð°)
  const width = 500; // ÐšÐ¾Ð½ÑÑ‚Ð°Ð½Ñ‚Ð° ("Ð²Ð¸Ð´Ð·") Ñ…Ñ€Ð°Ð½Ð¸Ñ‚
  const height = 500;

  // ÐÐ°Ñ‡Ð°Ð»ÑŒÐ½Ñ‹Ðµ ÐºÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ñ‹ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ Ð·Ð°Ð¹Ñ†Ð° Ð½Ð° ÑÐºÑ€Ð°Ð½Ðµ
  let x = width / 2;  // ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ð°Ñ ("Ð¸ÐºÑ") Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ ÐºÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ñƒ ÑÐµÑ€ÐµÐ´Ð¸Ð½Ñ‹ ÑÐºÑ€Ð°Ð½Ð° Ð¿Ð¾ Ð³Ð¾Ñ€Ð¸Ð·Ð¾Ð½Ñ‚Ð°Ð»Ðµ;
  let y = height / 2; // ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ð°Ñ ("Ð²Ð°Ð¹") Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ ÐºÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ñ‹ ÑÐµÑ€ÐµÐ´Ð¸Ð½Ñ‹ ÑÐºÑ€Ð°Ð½Ð° Ð¿Ð¾ Ð²ÐµÑ€Ñ‚Ð¸ÐºÐ°Ð»Ðµ

  // Ð¡Ð²Ð¾Ð±Ð¾Ð´Ð½Ð¾Ðµ Ð¿Ð°Ð´ÐµÐ½Ð¸Ðµ
  let dy = 1;         // ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ð°Ñ ("Ð´Ð¸ Ð²Ð°Ð¹") Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ Ð²ÐµÐ»Ð¸Ñ‡Ð¸Ð½Ñƒ Ð½Ð° ÐºÐ¾Ñ‚Ð¾Ñ€ÑƒÑŽ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð¸Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð²Ñ‹ÑÐ¾Ñ‚Ñƒ Ð·Ð°Ð¹Ñ†Ð°

  // Ð¢Ñ€Ð°Ð²Ð°
  let dline = 400;    // ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ð°Ñ ("Ð´ Ð»Ð°Ð¹Ð½") Ð±ÑƒÐ´ÐµÑ‚ Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð»Ð¸Ð½Ð¸ÑŽ Ñ‚Ñ€Ð°Ð²Ñ‹

  // ÐšÑƒÑÑ‚
  let ex = width;     // ÐºÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ð° "x" Ð²ÐµÑ€Ñ…Ð½ÐµÐ³Ð¾ Ð»ÐµÐ²Ð¾Ð³Ð¾ ÐºÑ€Ð°Ñ ÐºÑƒÑÑ‚Ð° 
  let ey = 0;         // ÐºÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ð° "y" Ð²ÐµÑ€Ñ…Ð½ÐµÐ³Ð¾ Ð»ÐµÐ²Ð¾Ð³Ð¾ ÐºÑ€Ð°Ñ ÐºÑƒÑÑ‚Ð°
  let ew = 30;        // ÑˆÐ¸Ñ€Ð¸Ð½Ð° ÐºÑƒÑÑ‚Ð°
  let eh = 200;       // Ð²Ñ‹ÑÐ¾Ñ‚Ð° ÐºÑƒÑÑ‚Ð°

  let s = 80;         // Ñ€Ð°Ð·Ð¼ÐµÑ€ Ð·Ð°Ð¹Ñ†Ð°


  /**
   * Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ ("ÑÐµÑ‚Ð°Ð¿")
   * 
   * @description
   * Ð’Ñ‹Ð·Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð¿Ñ€Ð¸ ÑÑ‚Ð°Ñ€Ñ‚Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ Ð¾Ð´Ð¸Ð½ Ñ€Ð°Ð·
   */
  p.setup = () => {
    p.createCanvas(width, height);
    p.textAlign(p.CENTER, p.CENTER);
    p.textSize(s);
  };


  /**
   * Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ ("Ð´Ñ€Ð¾")
   * 
   * @description
   * Ð’Ñ‹Ð·Ñ‹Ð²Ð°ÐµÑ‚ÑÑ 60 Ñ€Ð°Ð· Ð² ÑÐµÐºÑƒÐ½Ð´Ñƒ,
   * Ð¿Ñ€Ð¸ ÐºÐ°Ð¶Ð´Ð¾Ð¼ Ð²Ñ‹Ð·Ð¾Ð²Ðµ Ð¿ÐµÑ€ÐµÑ€Ð¸ÑÐ¾Ð²Ñ‹Ð²Ð°ÐµÑ‚ ÑÐºÑ€Ð°Ð½ Ð¸ Ð²ÑÐµ,
   * Ñ‡Ñ‚Ð¾ Ð½Ð° Ð½ÐµÐ¼
   */
  p.draw = () => {
    p.background(0);


    p.text("ðŸ°", x, y);
    y += dy; 
    dy += 1; // Ð£Ð²ÐµÐ»Ð¸Ñ‡Ð¸Ð²Ð°ÐµÐ¼ Ñƒ Ð·Ð°Ð¹Ñ†Ð° ÑÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒ

    /**
     * Ð£ÑÐ»Ð¾Ð²Ð¸Ðµ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ñ‚Ð¾Ð³Ð¾, Ñ‡Ñ‚Ð¾ Ð·Ð°ÑÑ† ÐºÐ¾ÑÐ½ÑƒÐ»ÑÑ Ñ‚Ñ€Ð°Ð²Ñ‹
     * 
     * @description
     * Ð•ÑÐ»Ð¸ Ð·Ð°ÑÑ† ÐºÐ¾ÑÐ½ÑƒÐ»ÑÑ Ñ‚Ñ€Ð°Ð²Ñ‹,
     * Ñ‚Ð¾ Ð¼Ñ‹ Ð½Ðµ Ñ…Ð¾Ñ‚Ð¸Ð¼ Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¾Ð½ Ð¿Ð°Ð´Ð°Ð» Ð´Ð°Ð»ÑŒÑˆÐµ Ð²Ð½Ð¸Ð·,
     * Ð¿Ð¾ ÑÑ‚Ð¾Ð¼Ñƒ Ð¼Ñ‹ Ð¿Ñ€Ð¸ÑÐ²Ð°Ð¸Ð²Ð°ÐµÐ¼  Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ð¾Ð¹ dy ("Ð´Ð¸ Ð²Ð°Ð¹") 
     * Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ 0
     * 
     * if ("Ð¸Ñ„" - ÐµÑÐ»Ð¸)
     * 
     * (y > dline) - Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð³Ð¾ 
     * Ð±ÑƒÐ´ÐµÑ‚ Ð¿Ñ€Ð°Ð²Ð´Ð° / true ("Ñ‚Ñ€Ñƒ") Ð¸Ð»Ð¸  Ð»Ð¾Ð¶ÑŒ / false ("Ñ„Ð¾Ð»Ñ")
     * 
     * { ... } - Ñ„Ð¸Ð³ÑƒÑ€Ð½Ñ‹Ðµ ÑÐºÐ¾Ð±ÐºÐ¸ ("Ñ‚ÐµÐ»Ð¾ ÑƒÑÐ»Ð¾Ð²Ð¸Ñ")
     * Ð’ Ð½Ð¸Ñ… Ñ€Ð°ÑÐ¿Ð¾Ð»Ð¾Ð´ÐµÐ½ ÐºÐ¾Ð´, ÐºÑ‚Ð¾Ñ€Ñ‹Ð¹ Ð½Ð°Ð´Ð¾ Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ ÐµÑÐ»Ð¸ 
     * Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑƒÑÐ»Ð¾Ð²Ð¸Ñ Ð²ÐµÑ€Ð½ÐµÑ‚ true ("Ñ‚Ñ€Ñƒ") / Ð¿Ñ€Ð°Ð²Ð´Ð°
    */ 
    if (y > dline) {
      dy = 0;
    }

    if (p.mouseIsPressed) {
      dy = -9;
    }

    p.noStroke();
    p.fill(2, 255, 0, 128);
    p.rect(0, dline, width, height - dline);

    p.fill(100);
    p.rect(ex, 0, ew, eh);
    ex -= 1;

    if (ex < 0) {
      ex = width;
      eh = p.random(dline / 4, dline / 2);

      if (p.random(100) > 50) {
        ey = 0;
      } else {
        ey = dline - eh;
      }
    }
    //ÑÑ‚Ð¾Ð»ÐºÐ½Ð¾Ð²ÐµÐ½Ð¸Ðµ Ñ ÐºÑƒÑÑ‚Ð¾Ð¼ (Ñ†ÐµÐ½Ñ‚Ñ€Ð° Ð·Ð¹Ñ†Ð°)
    // if ((x > ex) && (x < ex + ew) && (y > ey) && (y < ey + eh)) {
    //   p.noLoop();
    // }

    if ((x + s / 2 > ex) && (x - s / 2 < ex + ew) && (y + s / 2 > ey) && (y - s /2 < ey + eh)) {
      p.noLoop();
    }
  };

});